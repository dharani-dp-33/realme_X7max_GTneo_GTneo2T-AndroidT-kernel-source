name: Realme X7 Max Kernel Builder
on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Clone Kernel Source
        run: |
          git clone --depth=1 \
            "https://github.com/dharani-dp-33/realme_X7max_GTneo_GTneo2T-AndroidT-kernel-source" \
            kernel-source

          # Verify clone success
          if [ ! -d "kernel-source" ]; then
            echo "::error::Clone failed! Check repository URL."
            exit 1
          fi

      - name: Build Kernel
        run: |
          cd kernel-source
          make defconfig
          make -j$(nproc)

      - name: Upload Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: kernel-build
          path: kernel-source/arch/arm64/boot/Image
